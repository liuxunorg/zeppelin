{#
# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License.  You may obtain a copy of the License at
#
#    http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#}
job\
run\
--name={{ JOB_NAME }}\
--env=DOCKER_JAVA_HOME={{ DOCKER_JAVA_HOME }}\
--env=DOCKER_HADOOP_HDFS_HOME={{ DOCKER_HADOOP_HDFS_HOME }}\
--env=YARN_CONTAINER_RUNTIME_DOCKER_CONTAINER_NETWORK=bridge\
--env=HADOOP_LOG_DIR=/tmp\
--env=TZ="{{ DOCKER_CONTAINER_TIME_ZONE }}"\
--input_path=hdfs:///\
--checkpoint_path=hdfs:///\
--queue={{ SUBMARINE_YARN_QUEUE }}\
--num_ps=0\
--ps_launch_cmd=""\
--num_workers=1\
--worker_docker_image={{ ZEPPELIN_YARN_CONTAINER_IMAGE }}\
--worker_resources={{ ZEPPELIN_YARN_CONTAINER_RESOURCE }}\
--worker_launch_cmd="{{ WORKER_LAUNCH_CMD }}"\
{%- for file in LOCALIZATION_FILES %}
--localization="{{ file }}:."\
{%- endfor %}
--localization="{{ SUBMARINE_ALGORITHM_HDFS_PATH }}:./submarine_algorithm"\
{%- if SUBMARINE_HADOOP_CONF_DIR %}
--localization="{{ SUBMARINE_HADOOP_CONF_DIR }}:{{ SUBMARINE_HADOOP_CONF_DIR }}"\
{%- endif %}
--keytab={{ SUBMARINE_HADOOP_KEYTAB }}\
--principal={{ SUBMARINE_HADOOP_PRINCIPAL }}\
--distribute_keytab\
--verbose